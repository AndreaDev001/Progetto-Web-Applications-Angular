

<h3>{{this.getFormattedDate()}}</h3>
<h4 class="m-0">{{comment.utente}}</h4>
<section id="commentTextSection">
  <textarea #area autosize [tabIndex]="editMode ? 0 : -1" [style.outline]="editMode ? 'auto' : 'none'" [minRows]="1" [maxRows]="15" [formControl]="commentTextControl" [ngModel]="comment.contenuto" [readOnly]="!editMode" style="resize: none;width:100%">{{comment.contenuto}}</textarea>

  <div class="dropdown" style="position: absolute;top: 0px;right: 0px;">
    <button *ngIf="comment.utente === loggedUser?.username" class="btn dropdown btn-small" style="border: none;" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
        <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
      </svg>
    </button>
    <ul class="dropdown-menu">
      <li class="dropdown-item" (click)="setEditMode(true)">Modifica</li>
      <li class="dropdown-item" (click)="this.onDelete.emit(this.comment)">Elimina</li>
    </ul>
  </div>
</section>
<div *ngIf="commentTextControl.invalid">OH NO</div>

<section id="editSection">

  <section class="buttonsSection">
    <button [disabled]="isUpdatingFeedback" (click)="changeFeedback(FeedbackTypeEnum.like)">{{comment.numeroMiPiace}} mi Piace</button>
    <button [disabled]="isUpdatingFeedback" (click)="changeFeedback(FeedbackTypeEnum.dislike)">{{comment.numeroNonMiPiace }} non mi Piace</button>
  </section>
  <section class="buttonsSection" *ngIf="editMode">
    <button (click)="setEditMode(false)">ANNULLA</button>
    <button [disabled]="editStatus.isLoading || commentTextControl.invalid" (click)="editComment()">PROVA</button>
  </section>
</section>
